<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>HTTP Headers &mdash; Cantus API 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Cantus API 0.1.0 documentation" href="index.html" />
    <link rel="next" title="Request and Response Bodies" href="response_bodies.html" />
    <link rel="prev" title="HTTP Methods" href="http_methods.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
        <div class="headertitle"><a
          href="index.html">Cantus API 0.1.0 documentation</a></div>
        <div class="rel">
          <a href="http_methods.html" title="HTTP Methods"
             accesskey="P">previous</a> |
          <a href="response_bodies.html" title="Request and Response Bodies"
             accesskey="N">next</a> |
          <a href="http-routingtable.html" title="HTTP Routing Table"
             >routing table</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="http-headers">
<h1>HTTP Headers<a class="headerlink" href="#http-headers" title="Permalink to this headline">¶</a></h1>
<p>I&#8217;m not sure yet of the exact form this will take, but we&#8217;ll use HTTP headers to tell clients
about the field names available for a resource type, and the fields in a particular record that
have valid values. Clients can also request only certain fields, in case they won&#8217;t use some of the
data, since there&#8217;s no point in compressing, shipping, and decompressing it if we know ahead of
time that it&#8217;s going to be ignored.</p>
<p>We can probably include more information here too.</p>
<p>The HTTP/1.1bis headers are specified in <a class="reference external" href="https://tools.ietf.org/html/rfc7230#section-3.2">RFC 7230, S. 3.2</a>.
The IANA also maintains a
<a class="reference external" href="https://www.iana.org/assignments/message-headers/message-headers.xhtml">list of standard headers</a>.</p>
<dl class="docutils">
<dt>List of Headers We Should Have:</dt>
<dd><ul class="first last simple">
<li>also whatever I showed in the examples in &#8220;index.rst&#8221;</li>
</ul>
</dd>
</dl>
<div class="section" id="permanent-headers">
<h2>Permanent Headers<a class="headerlink" href="#permanent-headers" title="Permalink to this headline">¶</a></h2>
<p>These are given in the IANA&#8217;s &#8220;<a class="reference external" href="https://www.iana.org/assignments/message-headers/message-headers.xhtml">Permanent Message Header Field Names</a>&#8221;
list.</p>
<div class="section" id="accept">
<h3>Accept<a class="headerlink" href="#accept" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://tools.ietf.org/html/rfc7231#section-5.3.2">RFC 7231 S. 5.3.2</a>. At this point, Cantus
servers are only required to serve resources in JSON format. Refer to the <a class="reference internal" href="#content-type">Content-Type</a> section
for more information.</p>
<p>In accordance with the WebDAV specification, the <tt class="docutils literal"><span class="pre">application/xml</span></tt> and <tt class="docutils literal"><span class="pre">text/xml</span></tt> foramts
(specified in <a class="reference external" href="http://tools.ietf.org/html/rfc7303">RFC 7303</a>) will be supported as defaults in a
future version of the Cantus API. Therefore, clients MUST provide the <a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1">Accept</a>
header for forward compatibility.</p>
</div>
<div class="section" id="accept-charset">
<h3>Accept-Charset<a class="headerlink" href="#accept-charset" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://tools.ietf.org/html/rfc7231#section-5.3.3">RFC 7231 S. 5.3.3</a>. Cantus clients should
always use Unicode and UTF-8 whenever possible, so the recommended value for this header is <tt class="docutils literal"><span class="pre">utf-8</span></tt>.</p>
</div>
<div class="section" id="accept-encoding">
<h3>Accept-Encoding<a class="headerlink" href="#accept-encoding" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://tools.ietf.org/html/rfc7231#section-5.3.4">RFC 7231 S. 5.3.4</a>. Cantus clients and servers
should always use data compression whenever possible, so the recommended value for this header is
<tt class="docutils literal"><span class="pre">gzip</span></tt>.</p>
<p>TODO: find out if that&#8217;s possible without too much complication</p>
</div>
<div class="section" id="allow">
<h3>Allow<a class="headerlink" href="#allow" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://tools.ietf.org/html/rfc7231#section-7.4.1">RFC 7231 S. 7.4.1</a>. When a client invokes the
<tt class="docutils literal"><span class="pre">OPTIONS</span></tt> method on a resource, the &#8220;Allow&#8221; header in the response will indicate which other
methods may be invoked on that resource.</p>
<p>Example:</p>
<div class="highlight-http"><div class="highlight"><pre><span class="nf">OPTIONS</span> <span class="nn">/(browse_chants)</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>

Allow: GET, HEAD, OPTIONS
</pre></div>
</div>
</div>
<div class="section" id="content-encoding">
<h3>Content-Encoding<a class="headerlink" href="#content-encoding" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://tools.ietf.org/html/rfc7231#section-3.1.2.2">RFC 7231 S. 3.1.2.2</a>. Tells the client
the encoding of the response (i.e., whether its requested data compression algorithm was available
and used).</p>
</div>
<div class="section" id="content-length">
<h3>Content-Length<a class="headerlink" href="#content-length" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://tools.ietf.org/html/rfc7230#section-3.3.2">RFC 7230 S. 3.3.2</a>. A decimal number indicating
the number of octets expected in the response body. This is used by clients (probably automatically
by an HTTP library) to determine when all data has been received.</p>
</div>
<div class="section" id="content-type">
<h3>Content-Type<a class="headerlink" href="#content-type" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://tools.ietf.org/html/rfc7231#section-3.1.1.5">RFC 7231 S. 3.1.1.5</a>. Cantus servers provide
the Content-Type header with every response, including the &#8220;charset&#8221; parameter. While &#8220;charset&#8221; will
almost invariably be <tt class="docutils literal"><span class="pre">utf-8</span></tt>, it may be possible to provide other character sets in the future.</p>
<p>The media-type will be <tt class="docutils literal"><span class="pre">application/json</span></tt>, indicating a message body encoded in JSON, as specified
in <a class="reference external" href="http://tools.ietf.org/html/rfc7158">RFC 7158</a>.</p>
<p>In accordance with the WebDAV specification, the <tt class="docutils literal"><span class="pre">application/xml</span></tt> and <tt class="docutils literal"><span class="pre">text/xml</span></tt> foramts
(specified in <a class="reference external" href="http://tools.ietf.org/html/rfc7303">RFC 7303</a>) will be supported as defaults in a
future version of the Cantus API. Therefore, clients MUST provide the <a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1">Accept</a>
header for forward compatibility.</p>
</div>
</div>
<div class="section" id="cantus-specific-extension-headers">
<span id="cantus-headers"></span><h2>Cantus-Specific Extension Headers<a class="headerlink" href="#cantus-specific-extension-headers" title="Permalink to this headline">¶</a></h2>
<p>These headers extend the HTTP and WebDAV standards in ways specific to the Cantus API. We create
extension headers only when no sensible alternative is sensible.</p>
<div class="section" id="x-cantus-version">
<h3>X-Cantus-Version<a class="headerlink" href="#x-cantus-version" title="Permalink to this headline">¶</a></h3>
<p>Indicates the Cantus API version implemented by a client or server. For example,
<tt class="docutils literal"><span class="pre">X-Cantus-Version:</span> <span class="pre">Cantus/0.0.1</span></tt> is version 0.0.1, and <tt class="docutils literal"><span class="pre">X-Cantus-Version:</span> <span class="pre">Cantus/3.2.6-test</span></tt> is
a version called &#8220;3.2.6-test.&#8221; Also refer to <a class="reference internal" href="index.html#version-numbers"><em>API Versions and Version Numbers</em></a>.</p>
</div>
<div class="section" id="x-cantus-include-resources">
<h3>X-Cantus-Include-Resources<a class="headerlink" href="#x-cantus-include-resources" title="Permalink to this headline">¶</a></h3>
<p>Clients MAY include this header in a requested, telling a server whether to include a &#8220;resources&#8221;
member with hyperlinks to related resources. This can be &#8220;true&#8221; or &#8220;false&#8221; (but is case-insensitive).
Servers MUST use this header to indicate whether &#8220;resources&#8221; members are included in a response.</p>
</div>
<div class="section" id="x-cantus-fields">
<h3>X-Cantus-Fields<a class="headerlink" href="#x-cantus-fields" title="Permalink to this headline">¶</a></h3>
<p>Clients MAY use this header to request only certain fields. Servers MUST include this header, which
lists the fields that are present in <em>all</em> returned resources. Fields that are only present in some
of the returned resources belong in the <strong>X-Cantus-Extra-Fields</strong> header. Refer also to
the <a class="reference internal" href="#cantus-header-example"><em>Example of Cantus Headers</em></a>.</p>
</div>
<div class="section" id="x-cantus-extra-fields">
<h3>X-Cantus-Extra-Fields<a class="headerlink" href="#x-cantus-extra-fields" title="Permalink to this headline">¶</a></h3>
<p>A semicolon-separated list of resource fields. This has no meaning in a request, but a server MUST
use this to indicate which fields were available for some, but not all, resources. Refer also to the
<a class="reference internal" href="#cantus-header-example"><em>Example of Cantus Headers</em></a>.</p>
</div>
<div class="section" id="x-cantus-total-results">
<h3>X-Cantus-Total-Results<a class="headerlink" href="#x-cantus-total-results" title="Permalink to this headline">¶</a></h3>
<p>The total number of results that match a search query. The server MUST include this header with the
results of every search query.</p>
</div>
<div class="section" id="x-cantus-per-page">
<h3>X-Cantus-Per-Page<a class="headerlink" href="#x-cantus-per-page" title="Permalink to this headline">¶</a></h3>
<p>Clients MAY use this header to negotiate &#8220;paginated&#8221; results with the server, where queries matching
a large number of resources will return information about only a portion of those resources. The
value should always be a positive integer or zero. A zero symbolizes a request for non-paginated
results&#8212;information for all matching resources. Servers MUST include this header if the
<strong>X-Cantus-Total-Results</strong> is present and greater than <tt class="docutils literal"><span class="pre">0</span></tt> (i.e., for every search
query that yields results).</p>
<p>If the server determines that the number of requested resources is too high, it MUST return a status
code of <a class="reference external" href="https://tools.ietf.org/html/rfc4918#section-11.5">507 Insufficient Storage</a>.
The limit is determined by the server, and may change arbitrarily. However, the 507 response MUST
include an <strong>X-Cantus-Per-Page</strong> header with a suggested value that the server determines
it is likely to be capable of handling.</p>
</div>
<div class="section" id="x-cantus-page">
<h3>X-Cantus-Page<a class="headerlink" href="#x-cantus-page" title="Permalink to this headline">¶</a></h3>
<p>If <strong>X-Cantus-Per-Page</strong> is non-zero, servers MUST and clients MAY include this header to
indicate that the results should correspond to a particular sub-set of the full query. If a client
provides a value for this header greater than <strong>X-Cantus-Total-Results</strong> divided by
<strong>X-Cantus-Per-Page</strong> (i.e., greater than the total number of pages) the server MUST
respond with <a class="reference external" href="https://tools.ietf.org/html/rfc7231#section-6.5.8">409 Conflict</a>.</p>
</div>
<div class="section" id="x-cantus-sort">
<h3>X-Cantus-Sort<a class="headerlink" href="#x-cantus-sort" title="Permalink to this headline">¶</a></h3>
<p>If the <strong>X-Cantus-Sort</strong> is present in a request, it will contain a field name and
direction indicator (<tt class="docutils literal"><span class="pre">asc</span></tt> or <tt class="docutils literal"><span class="pre">desc</span></tt>) separated by a semicolon. The field name may also be
&#8220;relevance,&#8221; the default value, which ranks search results by a server-determined relevance score.
If the indicated field is not present in all sources, the server MAY choose another field by which
to sort. For every search query, the server MUST include an <strong>X-Cantus-Sort</strong> response
header indicating the actual field and sort direction of the response.</p>
</div>
<div class="section" id="x-cantus-search-help">
<span id="id2"></span><h3>X-Cantus-Search-Help<a class="headerlink" href="#x-cantus-search-help" title="Permalink to this headline">¶</a></h3>
<p>If the client indicates <tt class="docutils literal"><span class="pre">true</span></tt> in the <strong>X-Cantus-Search-Help</strong> header, the server MAY
modify a search request to be more lenient if the original search request produced no results. In
this case, the server MUST return the actual query in the <strong>X-Cantus-Search-Help</strong>
response header.</p>
</div>
<div class="section" id="example-of-cantus-headers">
<span id="cantus-header-example"></span><h3>Example of Cantus Headers<a class="headerlink" href="#example-of-cantus-headers" title="Permalink to this headline">¶</a></h3>
<p>A response.</p>
<div class="highlight-http"><div class="highlight"><pre><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json; charset=&quot;utf-8&quot;</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">xxx</span>
<span class="na">X-Cantus-Version</span><span class="o">:</span> <span class="l">1.0.0</span>
<span class="na">X-Cantus-Include-Resources</span><span class="o">:</span> <span class="l">false</span>
<span class="na">X-Cantus-Fields</span><span class="o">:</span> <span class="l">id;incipit</span>
<span class="na">X-Cantus-Extra-Fields</span><span class="o">:</span> <span class="l">cantus_id</span>
<span class="na">X-Cantus-Total-Results</span><span class="o">:</span> <span class="l">10</span>
<span class="na">X-Cantus-Per-Page</span><span class="o">:</span> <span class="l">3</span>
<span class="na">X-Cantus-Page</span><span class="o">:</span> <span class="l">2</span>

<span class="p">{</span><span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="nt">&quot;chant&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;149243&quot;</span><span class="p">,</span>
         <span class="nt">&quot;inicipit&quot;</span><span class="p">:</span> <span class="s2">&quot;Estote parati similes&quot;</span><span class="p">,</span>
         <span class="nt">&quot;cantus_id&quot;</span><span class="p">:</span> <span class="s2">&quot;002685&quot;</span>
         <span class="p">}},</span>
    <span class="p">{</span><span class="nt">&quot;chant&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;149244&quot;</span><span class="p">,</span>
        <span class="nt">&quot;incipit&quot;</span><span class="p">:</span> <span class="s2">&quot;Salvator mundi domine qui nos&quot;</span><span class="p">,</span>
        <span class="p">}},</span>
    <span class="p">{</span><span class="nt">&quot;chant&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;149245&quot;</span><span class="p">,</span>
        <span class="nt">&quot;incipit&quot;</span><span class="p">:</span> <span class="s2">&quot;Estote parati similes&quot;</span><span class="p">,</span>
        <span class="nt">&quot;cantus_id&quot;</span><span class="p">:</span> <span class="s2">&quot;002685&quot;</span><span class="p">,</span>
        <span class="p">}}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="resource_types.html">Resource Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="http_methods.html">HTTP Methods</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">HTTP Headers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#permanent-headers">Permanent Headers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cantus-specific-extension-headers">Cantus-Specific Extension Headers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="response_bodies.html">Request and Response Bodies</a></li>
<li class="toctree-l1"><a class="reference internal" href="searching.html">How to Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiserver.html">Multi-Server Interoperabilty</a></li>
</ul>

          <h3 style="margin-top: 1.5em;">Search</h3>
          <form class="search" action="search.html" method="get">
            <input type="text" name="q" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
          <p class="searchtip" style="font-size: 90%">
            Enter search terms or a module, class or function name.
          </p>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="http_methods.html" title="HTTP Methods"
             >previous</a> |
          <a href="response_bodies.html" title="Request and Response Bodies"
             >next</a> |
          <a href="http-routingtable.html" title="HTTP Routing Table"
             >routing table</a> |
          <a href="genindex.html" title="General Index"
             >index</a>
            <br/>
            <a href="_sources/http_headers.txt"
               rel="nofollow">Show Source</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2015, Christopher Antila.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>